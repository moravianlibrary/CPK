<?
  // Set page title.
  //$this->headTitle($this->translate('Knihovny.cz'));
  $title = (!empty($this->themeConfiguration()->themeConfig['title'])? $this->themeConfiguration()->themeConfig['title'] : "Knihovny.cz");
  $this->headTitle($this->translate($title));

  // Disable top search box -- this page has a special layout.
  $this->layout()->searchbox = false;
  $this->layout()->frontpage = true;

  // Set default value if necessary:
  if (!isset($this->searchClassId)) {
    $this->searchClassId = 'Solr';
  }

  // Load search actions and settings (if any):
  $options = $this->searchOptions($this->searchClassId);
  $basicSearch = $options->getSearchAction();
  $advSearch = $options->getAdvancedSearchAction();

  $this->layout()->breadcrumbs = '<li><a title="' . $this->transEsc('Main page') . '" href="/">' . $this->transEsc('Main page') . '</a></li> ';
?>

<section id="partner" class="px-5">
  <div class="container">
    <div class="row">
      <div class="col-xs-12">
        <a class="text-center" href="https://1989.knihovny.cz/" target="_blank" title="Sametová revoluce '89 v knihovnách">
          <img class="img-responsive" src="/images/1989.knihovny.cz-745x100.jpg" alt="Sametová revoluce '89 v knihovnách" title="Sametová revoluce '89 v knihovnách">
        </a>
      </div>
    </div>
  </div>
</section>

<div class="searchHomeContent">
  <? if ($this->ils()->getOfflineMode() == "ils-offline"): ?>
    <div class="alert alert-warning">
      <h2><?=$this->transEsc('ils_offline_title')?></h2>
      <p><strong><?=$this->transEsc('ils_offline_status')?></strong></p>
      <p><?=$this->transEsc('ils_offline_home_message')?></p>
      <? $supportEmail = $this->escapeHtmlAttr($this->systemEmail()); ?>
      <p><a href="mailto:<?=$supportEmail?>"><?=$supportEmail?></a></p>
    </div>
  <? endif; ?>
  <script>
    dataLayer.push({
      'page': {
        'category': 'frontpage'
      }
    });
  </script>
  <? foreach ($this->widgets as $widgetsList): foreach ($widgetsList as $widget): ?>
    <? if ($widget->getName() == 'infobox') : ?>
      <?=$this->render('widgets/infobox.phtml', ['widget' => $widget, 'language' => $language])?>
    <? elseif ($widget->getName() == 'Document_Types_Widget'): ?>
      <?=$this->render('widgets/document_types_widget.phtml', [
          'widget' => $widget,
          'documentTypesWidget' => $documentTypesWidget
      ])?>
    <? else: ?>
      <?=$this->render('widgets/widget.phtml', [
          'widget' => $widget,
          'language' => $language,
          'searchWidgetBaseUrl' => $this->searchWidgetBaseUrl
        ])?>
    <? endif; ?>
  <? endforeach; ?><? endforeach; ?>

</div>
